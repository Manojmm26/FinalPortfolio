<div *ngIf="isOpen" [style.left.px]="currentX" [style.top.px]="currentY" [style.width.px]="width"
    [style.height.px]="height" class="absolute flex flex-col rounded-lg shadow-2xl z-10">

    <!-- Window Frame (Aero) -->
    <div class="aero-glass rounded-lg h-full flex flex-col relative pt-1 px-1 pb-1 bg-blue-400/30">

        <!-- Title Bar -->
        <div class="window-header h-8 flex justify-between items-center px-2 cursor-default"
            (mousedown)="startDrag($event)">
            <div class="flex items-center gap-2">
                <img *ngIf="icon" [src]="icon" class="w-4 h-4" [alt]="title">
                <span class="text-shadow-sm text-gray-800 font-semibold">{{ title }}</span>
            </div>
            <!-- Window Controls -->
            <div class="flex gap-1">
                <button
                    class="w-6 h-5 bg-white/20 hover:bg-white/50 rounded-sm border border-white/30 shadow-inner flex items-center justify-center text-[10px]"
                    (click)="onMinimize()">_</button>
                <button
                    class="w-6 h-5 bg-white/20 hover:bg-white/50 rounded-sm border border-white/30 shadow-inner flex items-center justify-center text-[10px]"
                    (click)="onMaximize()">□</button>
                <button
                    class="w-10 h-5 bg-red-400/80 hover:bg-red-600 text-white rounded-sm border border-red-300/50 shadow-inner flex items-center justify-center text-[10px]"
                    (click)="onClose()">✕</button>
            </div>
        </div>

        <!-- Computer Content -->
        <ng-container *ngIf="contentType === 'computer'">
            <!-- Address Bar Area -->
            <div class="bg-[#eff3f7] p-1 flex items-center gap-2 text-sm border-b border-gray-300">
                <div class="flex gap-1 text-gray-500 text-lg">
                    <i class="fa-solid fa-arrow-left hover:text-blue-500 cursor-pointer"></i>
                    <i class="fa-solid fa-arrow-right hover:text-blue-500 cursor-pointer"></i>
                </div>
                <div class="flex-1 bg-white border border-gray-400/60 shadow-inner px-2 py-0.5 flex items-center">
                    <i class="fa-solid fa-desktop text-gray-400 mr-2"></i>
                    <span>Computer</span>
                </div>
                <div class="w-48 bg-white border border-gray-400/60 shadow-inner px-2 py-0.5 text-gray-400">Search
                    Computer</div>
            </div>

            <!-- Main Content -->
            <div class="flex-1 bg-white flex">
                <!-- Sidebar -->
                <div class="w-32 bg-[#f0f4fa] border-r border-gray-200 p-2 text-xs space-y-2">
                    <div class="font-bold text-gray-600">Favorites</div>
                    <div class="pl-2 flex items-center gap-1 text-gray-700 hover:bg-blue-100 cursor-pointer">
                        <i class="fa-solid fa-desktop text-blue-400"></i> Desktop
                    </div>
                    <div class="pl-2 flex items-center gap-1 text-gray-700 hover:bg-blue-100 cursor-pointer">
                        <i class="fa-solid fa-download text-blue-400"></i> Downloads
                    </div>
                </div>
                <!-- Drives -->
                <div class="flex-1 p-4">
                    <div class="text-gray-600 font-bold mb-2 border-b border-gray-200 w-full block">Hard Disk Drives (1)
                    </div>
                    <div class="flex gap-4">
                        <div
                            class="flex items-center gap-2 hover:bg-blue-50 p-2 border border-transparent hover:border-blue-100 rounded cursor-pointer w-64">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/f/f0/Hard_disk_icon.svg"
                                class="w-10 h-10">
                            <div class="w-full">
                                <div class="text-gray-800 font-semibold">Local Disk (C:)</div>
                                <div
                                    class="w-full h-3 bg-gray-200 border border-gray-400 rounded-sm overflow-hidden relative">
                                    <div class="h-full bg-blue-400 w-3/4"></div>
                                </div>
                                <div class="text-gray-500 text-xs">150 GB free of 500 GB</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Status Bar -->
            <div class="h-6 bg-[#eff3f7] border-t border-gray-300 flex items-center px-2 text-xs text-gray-600">
                1 item selected
            </div>
        </ng-container>

        <!-- Notepad Content -->
        <ng-container *ngIf="contentType === 'notepad'">
            <!-- Menu Bar -->
            <div class="bg-white px-1 text-xs flex gap-2 py-0.5 border-b border-gray-200">
                <span class="hover:bg-blue-100 cursor-pointer px-1">File</span>
                <span class="hover:bg-blue-100 cursor-pointer px-1">Edit</span>
                <span class="hover:bg-blue-100 cursor-pointer px-1">Format</span>
                <span class="hover:bg-blue-100 cursor-pointer px-1">View</span>
                <span class="hover:bg-blue-100 cursor-pointer px-1">Help</span>
            </div>
            <!-- Content -->
            <textarea class="flex-1 w-full p-1 outline-none resize-none font-mono text-sm"
                placeholder="Type here..."></textarea>
        </ng-container>

        <!-- Custom Content Slot -->
        <ng-container *ngIf="contentType === 'custom'">
            <div class="flex-1 bg-white p-4">
                <ng-content></ng-content>
            </div>
        </ng-container>

    </div>
</div>